<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShopMax ‚Äî Sua loja online</title>
  <meta name="description" content="Loja de exemplo ‚Äî cat√°logo, carrinho e checkout com PIX simulado" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    /* ===== Reset / Base ===== */
    :root{
      --primary:#6d2bd6;     /* roxo inspirado */
      --accent:#ffd400;      /* amarelo vibrante */
      --bg:#f6f7fb;
      --card:#ffffff;
      --muted:#666;
      --shadow: 0 6px 18px rgba(15,20,30,0.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Poppins',sans-serif;
      background:var(--bg);
      color:#111;
      -webkit-font-smoothing:antialiased;
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}

    /* ===== Header ===== */
    .topbar{
      background:linear-gradient(90deg,var(--primary),#4a1fae);
      color:white;
      padding:12px 20px;
      display:flex;
      align-items:center;
      gap:16px;
      position:sticky;
      top:0;
      z-index:50;
      box-shadow:var(--shadow);
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      cursor:pointer;
    }
    .brand .logo{
      width:44px;height:44px;border-radius:10px;
      background:linear-gradient(135deg,white, rgba(255,255,255,0.85));
      display:flex;align-items:center;justify-content:center;
      color:var(--primary); font-weight:700;
      box-shadow:0 4px 10px rgba(0,0,0,0.12);
    }
    .brand h1{font-size:1.1rem;margin:0;letter-spacing:0.2px}
    .search{
      flex:1;display:flex;align-items:center;gap:8px;
    }
    .search input{
      width:100%;padding:10px 14px;border-radius:8px;border:0;outline:none;
      font-size:0.95rem;
    }
    .search button{
      background:transparent;border:2px solid rgba(255,255,255,0.12);color:white;padding:9px 12px;border-radius:8px;
      cursor:pointer;font-weight:600;
    }
    .top-actions{display:flex;gap:10px;align-items:center}
    .btn-primary{
      background:var(--accent);color:#111;border-radius:8px;padding:10px 14px;border:0;font-weight:700;cursor:pointer;
      box-shadow:0 6px 18px rgba(0,0,0,0.08);
    }
    .icon-btn{background:rgba(255,255,255,0.08);padding:8px;border-radius:8px;color:white;cursor:pointer}

    /* ===== Layout ===== */
    .container{max-width:1180px;margin:28px auto;padding:0 18px}
    .hero{
      background:linear-gradient(90deg, rgba(109,43,214,0.08), rgba(255,212,0,0.03));
      border-radius:12px;padding:24px;display:flex;gap:20px;align-items:center;box-shadow:var(--shadow);
    }
    .hero .left{flex:1}
    .hero h2{margin:0 0 10px 0}
    .hero p{margin:0;color:var(--muted)}
    .hero .cta{margin-top:12px}
    .categories{display:flex;gap:12px;margin-top:16px;flex-wrap:wrap}
    .cat{background:var(--card);padding:10px 14px;border-radius:10px;box-shadow:var(--shadow);cursor:pointer;font-weight:600}

    /* ===== Products ===== */
    .grid{
      margin-top:26px;display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px;
    }
    .card{
      background:var(--card);border-radius:12px;padding:14px;box-shadow:var(--shadow);display:flex;flex-direction:column;
    }
    .card img{height:150px;object-fit:contain;margin-bottom:10px}
    .card h3{margin:4px 0;font-size:1rem}
    .price{font-weight:700;color:var(--primary);margin-top:auto}
    .card .actions{display:flex;gap:8px;margin-top:12px}
    .btn-add{flex:1;background:var(--primary);color:white;border:0;padding:10px;border-radius:8px;cursor:pointer}
    .btn-details{background:transparent;border:1px solid #ddd;padding:10px;border-radius:8px;cursor:pointer}

    /* ===== Cart (floating) ===== */
    .cart-floating{
      position:fixed;right:20px;bottom:20px;background:linear-gradient(180deg,#fff,#fff);border-radius:14px;padding:10px;
      box-shadow:0 10px 30px rgba(0,0,0,0.12);z-index:60;width:320px;
      transform:translateY(0);transition:transform .22s ease;
    }
    .cart-header{display:flex;justify-content:space-between;align-items:center;gap:10px}
    .cart-items{max-height:300px;overflow:auto;margin-top:12px;padding-right:6px}
    .cart-item{display:flex;gap:10px;align-items:center;margin-bottom:10px}
    .cart-item img{width:56px;height:56px;object-fit:cover;border-radius:8px}
    .cart-item .meta{flex:1}
    .cart-footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
    .checkout-btn{background:var(--accent);border-radius:10px;padding:10px 14px;border:0;font-weight:700;cursor:pointer}

    /* ===== Pages (hash routing sections) ===== */
    .page{display:none}
    .page.active{display:block}
    .checkout-box{background:var(--card);padding:18px;border-radius:12px;box-shadow:var(--shadow);max-width:720px;margin:18px auto}

    /* ===== PIX area ===== */
    .pix-code{background:#f3f4f7;padding:14px;border-radius:10px;font-family:monospace;display:flex;justify-content:space-between;align-items:center;gap:8px}
    .copy-btn{background:var(--primary);color:white;padding:8px 10px;border-radius:8px;border:0;cursor:pointer}

    /* ===== Footer ===== */
    footer{margin-top:40px;padding:24px 0;text-align:center;color:var(--muted)}

    /* ===== Responsive ===== */
    @media (max-width:880px){
      .cart-floating{width:92%;right:4%;left:4%}
      .hero{flex-direction:column;align-items:flex-start}
      .brand h1{display:none}
    }
  </style>
</head>
<body>

  <!-- TOPBAR -->
  <header class="topbar">
    <div class="brand" onclick="navigate('/')">
      <div class="logo">SM</div>
      <h1>ShopMax</h1>
    </div>

    <div class="search" style="margin-left:6px;">
      <input id="searchInput" placeholder="Buscar produtos, marcas e muito mais..." oninput="renderProducts()" />
      <button onclick="renderProducts()">Buscar</button>
    </div>

    <div class="top-actions">
      <div class="icon-btn" title="Favoritos">‚ù§</div>
      <div class="icon-btn" title="Pedidos">üßæ</div>
      <button class="btn-primary" onclick="navigate('#/checkout')">Finalizar Compra</button>
    </div>
  </header>

  <!-- CONTAINER -->
  <main class="container">
    <!-- HERO -->
    <section class="hero" aria-labelledby="hero-title">
      <div class="left">
        <h2 id="hero-title">Promo√ß√µes imperd√≠veis todos os dias</h2>
        <p>Loja de exemplo com fluxo de compra funcional. Adicione produtos ao carrinho, gere um PIX aleat√≥rio e simule o redirecionamento.</p>
        <div class="cta">
          <button class="btn-primary" onclick="scrollToGrid()">Ver Ofertas</button>
        </div>

        <div class="categories" id="categories">
          <!-- categorias geradas por JS -->
        </div>
      </div>
      <div class="right" style="width:320px">
        <img src="https://images.unsplash.com/photo-1606813902826-543f7f7f5c70?auto=format&fit=crop&w=600&q=60" alt="banner" style="border-radius:12px;"/>
      </div>
    </section>

    <!-- PRODUCT GRID PAGE -->
    <section id="home" class="page active">
      <div class="grid" id="productGrid" style="margin-top:20px">
        <!-- produtos gerados por JS -->
      </div>
    </section>

    <!-- CHECKOUT PAGE -->
    <section id="checkout" class="page">
      <div class="checkout-box">
        <h2>Checkout</h2>
        <p>Revise seu pedido e escolha o m√©todo de pagamento. Aqui simulamos pagamento via PIX.</p>

        <div id="checkoutItems" style="margin-top:12px"></div>

        <div style="margin-top:14px;display:flex;gap:12px;align-items:center">
          <label style="font-weight:600">M√©todo:</label>
          <select id="paymentMethod" style="padding:8px;border-radius:8px;border:1px solid #ddd">
            <option value="pix">PIX</option>
            <option value="redirect">Redirecionar para pagamento externo</option>
          </select>
        </div>

        <div id="pixArea" style="margin-top:18px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>Chave PIX gerada</strong>
            <button class="copy-btn" onclick="copyPIX()">COPIAR</button>
          </div>
          <div class="pix-code" id="pixCode" style="margin-top:10px">Gerando...</div>

          <p style="color:var(--muted);margin-top:10px">Ap√≥s copiar a chave PIX, clique em <strong>Simular Pagamento</strong> para ir para a p√°gina de confirma√ß√£o.</p>

          <div style="display:flex;gap:10px;margin-top:12px">
            <button class="checkout-btn" onclick="simulatePayment()">Simular Pagamento</button>
            <button style="background:#eee;border:0;padding:10px;border-radius:8px;cursor:pointer" onclick="navigate('/')">Voltar √† loja</button>
          </div>
        </div>
      </div>
    </section>

    <!-- SUCCESS PAGE -->
    <section id="success" class="page">
      <div class="checkout-box" style="text-align:center">
        <h2>Pagamento Confirmado</h2>
        <p>Obrigado! O pagamento foi confirmado (simula√ß√£o).</p>
        <div style="margin-top:18px">
          <button class="btn-primary" onclick="clearCartAndReturn()">Voltar √† loja</button>
        </div>
      </div>
    </section>

    <!-- ERROR PAGE -->
    <section id="error" class="page">
      <div class="checkout-box" style="text-align:center">
        <h2>Pagamento N√£o Confirmado</h2>
        <p>Ocorreu um erro ao processar o pagamento (simula√ß√£o). Tente novamente.</p>
        <div style="margin-top:18px">
          <button class="btn-primary" onclick="navigate('#/checkout')">Tentar novamente</button>
        </div>
      </div>
    </section>
  </main>

  <!-- CART FLOATING -->
  <aside class="cart-floating" id="cartBox" aria-live="polite">
    <div class="cart-header">
      <strong>Carrinho</strong>
      <div style="display:flex;gap:8px;align-items:center">
        <small id="cartCount">0</small>
        <button title="Ir para checkout" class="icon-btn" onclick="navigate('#/checkout')">üõí</button>
      </div>
    </div>
    <div class="cart-items" id="cartItems"></div>
    <div class="cart-footer">
      <div>
        <small>Total</small>
        <div id="cartTotal" style="font-weight:700">R$ 0,00</div>
      </div>
      <div>
        <button class="checkout-btn" onclick="navigate('#/checkout')">Finalizar</button>
      </div>
    </div>
  </aside>

  <footer>
    ¬© <span id="year"></span> ShopMax ‚Äî Loja de exemplo. Conte√∫do e design originais.
  </footer>

  <script>
    // ===== Dados de exemplo =====
    const PRODUCTS = [
      { id: 'p1', title: 'Smart TV 50" UHD', price: 1899.00, img: 'https://via.placeholder.com/400x300?text=TV+50"' , category:'Eletr√¥nicos'},
      { id: 'p2', title: 'Smartphone X Pro', price: 2499.00, img: 'https://via.placeholder.com/400x300?text=Smartphone'},
      { id: 'p3', title: 'Fone de ouvido Bluetooth', price: 199.90, img: 'https://via.placeholder.com/400x300?text=Fone'},
      { id: 'p4', title: 'Notebook Gamer 16GB', price: 5799.00, img: 'https://via.placeholder.com/400x300?text=Notebook'},
      { id: 'p5', title: 'Geladeira Frost Free', price: 2199.90, img: 'https://via.placeholder.com/400x300?text=Geladeira', category:'Eletro'},
      { id: 'p6', title: 'Micro-ondas Digital', price: 399.90, img: 'https://via.placeholder.com/400x300?text=Micro-ondas', category:'Eletro'},
      { id: 'p7', title: 'Cafeteira Expresso', price: 249.00, img: 'https://via.placeholder.com/400x300?text=Cafeteira', category:'Cozinha'},
      { id: 'p8', title: 'Rel√≥gio Smart', price: 349.90, img: 'https://via.placeholder.com/400x300?text=Rel√≥gio', category:'Acess√≥rios'}
    ];

    // ===== Utilit√°rios =====
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));
    const formatMoney = v => v.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});

    // ===== Estado do carrinho (persistente) =====
    let CART = JSON.parse(localStorage.getItem('shopmax_cart') || '{}');

    // ===== Inicializa√ß√£o =====
    document.getElementById('year').textContent = new Date().getFullYear();
    window.addEventListener('hashchange', onRoute);
    document.addEventListener('DOMContentLoaded', () => {
      renderProducts();
      renderCategories();
      renderCart();
      onRoute(); // abrir rota atual
      generatePIX(); // chave PIX inicial
      $('#paymentMethod').addEventListener('change', () => {
        // opcional: esconder pix se outro m√©todo selecionado
        const sel = $('#paymentMethod').value;
        $('#pixArea').style.display = sel === 'pix' ? 'block' : 'block'; // mantemos block para demo; ajuste se quiser esconder
      });
    });

    // ===== Render de categorias =====
    function renderCategories(){
      const cats = Array.from(new Set(PRODUCTS.map(p => p.category || 'Destaques')));
      const el = $('#categories');
      el.innerHTML = '';
      cats.forEach(c => {
        const d = document.createElement('div');
        d.className = 'cat';
        d.textContent = c;
        d.onclick = () => {
          $('#searchInput').value = c;
          renderProducts();
          scrollToGrid();
        }
        el.appendChild(d);
      });
    }

    // ===== Render de produtos =====
    function renderProducts(){
      const q = $('#searchInput').value.trim().toLowerCase();
      const el = $('#productGrid');
      el.innerHTML = '';
      const filtered = PRODUCTS.filter(p => {
        if(!q) return true;
        return (p.title + ' ' + (p.category||'')).toLowerCase().includes(q);
      });
      filtered.forEach(p => {
        const c = document.createElement('div'); c.className = 'card';
        c.innerHTML = `
          <img src="${p.img}" alt="${escapeHTML(p.title)}">
          <h3>${escapeHTML(p.title)}</h3>
          <div class="price">${formatMoney(p.price)}</div>
          <div class="actions">
            <button class="btn-add" onclick="addToCart('${p.id}')">Adicionar</button>
            <button class="btn-details" onclick="openProduct('${p.id}')">Detalhes</button>
          </div>
        `;
        el.appendChild(c);
      });
      if(filtered.length === 0){
        el.innerHTML = '<div style="padding:20px;background:white;border-radius:10px;box-shadow:var(--shadow)">Nenhum produto encontrado.</div>';
      }
    }

    // ===== Produto modal (simples alert) =====
    function openProduct(id){
      const p = PRODUCTS.find(x => x.id === id);
      if(!p) return;
      const html = `
        ${p.title}\n\nPre√ßo: ${formatMoney(p.price)}\n\nDescri√ß√£o: Produto de exemplo.\n\nClique em OK para adicionar ao carrinho.
      `;
      if(confirm(html)){
        addToCart(id);
      }
    }

    // ===== Carrinho =====
    function addToCart(id){
      CART[id] = (CART[id] || 0) + 1;
      saveCart();
      renderCart();
      flashCart();
    }
    function removeFromCart(id){
      delete CART[id];
      saveCart();
      renderCart();
    }
    function changeQty(id, delta){
      CART[id] = Math.max( (CART[id]||0) + delta, 0 );
      if(CART[id] === 0) delete CART[id];
      saveCart();
      renderCart();
    }
    function clearCart(){
      CART = {};
      saveCart();
      renderCart();
    }
    function saveCart(){
      localStorage.setItem('shopmax_cart', JSON.stringify(CART));
    }
    function renderCart(){
      const container = $('#cartItems');
      container.innerHTML = '';
      let total = 0, count = 0;
      for(const id in CART){
        const p = PRODUCTS.find(x => x.id === id);
        const qty = CART[id];
        if(!p) continue;
        const item = document.createElement('div'); item.className = 'cart-item';
        item.innerHTML = `
          <img src="${p.img}" alt="${escapeHTML(p.title)}">
          <div class="meta">
            <div style="font-weight:600">${escapeHTML(p.title)}</div>
            <div style="color:var(--muted);font-size:0.9rem">${formatMoney(p.price)} x ${qty}</div>
            <div style="margin-top:6px;display:flex;gap:6px">
              <button style="padding:6px;border-radius:6px;border:0;background:#eee;cursor:pointer" onclick="changeQty('${id}',-1)">-</button>
              <button style="padding:6px;border-radius:6px;border:0;background:#eee;cursor:pointer" onclick="changeQty('${id}',1)">+</button>
              <button style="padding:6px;border-radius:6px;border:0;background:#f8d7da;color:#721c24;cursor:pointer" onclick="removeFromCart('${id}')">Remover</button>
            </div>
          </div>
        `;
        container.appendChild(item);
        total += p.price * qty;
        count += qty;
      }
      if(count === 0){
        container.innerHTML = '<div style="padding:12px;color:var(--muted)">Carrinho vazio</div>';
      }
      $('#cartTotal').textContent = formatMoney(total);
      $('#cartCount').textContent = count;
      // update checkout page items
      renderCheckoutItems();
    }

    // ===== Checkout items render =====
    function renderCheckoutItems(){
      const el = $('#checkoutItems');
      el.innerHTML = '';
      let total = 0;
      for(const id in CART){
        const p = PRODUCTS.find(x => x.id === id);
        const qty = CART[id];
        if(!p) continue;
        const r = document.createElement('div');
        r.style.display = 'flex'; r.style.justifyContent = 'space-between'; r.style.padding = '8px 0';
        r.innerHTML = `<div>${escapeHTML(p.title)} x ${qty}</div><div>${formatMoney(p.price * qty)}</div>`;
        el.appendChild(r);
        total += p.price * qty;
      }
      const sep = document.createElement('hr'); sep.style.border = 'none'; sep.style.borderTop = '1px solid #eee';
      el.appendChild(sep);
      const totalEl = document.createElement('div'); totalEl.style.display='flex'; totalEl.style.justifyContent='space-between'; totalEl.style.fontWeight='700'; totalEl.style.padding='8px 0';
      totalEl.innerHTML = `<div>Total</div><div>${formatMoney(total)}</div>`;
      el.appendChild(totalEl);
    }

    // ===== PIX generation + copy =====
    let currentPIX = '';
    function generatePIX(){
      // Gera uma chave PIX aleat√≥ria formatada (simples): 32 hex + dom√≠nio (exemplo) ‚Äî apenas para demo
      const randomHex = () => Math.random().toString(16).slice(2,10);
      const key = `shopmax-${randomHex()}${randomHex()}@pix.example`;
      currentPIX = key;
      if($('#pixCode')) $('#pixCode').textContent = key;
    }
    function copyPIX(){
      if(!currentPIX) generatePIX();
      navigator.clipboard?.writeText(currentPIX).then(() => {
        alert('Chave PIX copiada para a √°rea de transfer√™ncia:\n' + currentPIX);
      }).catch(() => {
        prompt('Copie a chave PIX abaixo:', currentPIX);
      });
    }

    // ===== Simular pagamento (redirecionamento) =====
    function simulatePayment(){
      // Se selecionado "redirect", abrir um link externo (simula√ß√£o)
      const method = $('#paymentMethod').value;
      if(method === 'redirect'){
        // redirecionar para um "gateway" simulado (aqui abrimos o GitHub por exemplo) ‚Äî voc√™ pode alterar
        window.open('https://example.com/', '_blank');
        // e depois ir para success
        navigate('#/success');
        return;
      }

      // Para PIX: gerar atraso e ir para success ou error aleatoriamente
      // Aqui apenas simulamos um processo ass√≠ncrono
      const chance = Math.random();
      // Mostrar tela de "aguarde" simples
      const original = document.activeElement;
      alert('Pagamento via PIX simulado. Clique OK para continuar.');
      setTimeout(()=>{
        if(chance > 0.12){
          navigate('#/success');
        } else {
          navigate('#/error');
        }
      }, 700);
    }

    // ===== Routing (hash) =====
    function onRoute(){
      const hash = location.hash || '#/';
      // mostrar a p√°gina correspondente
      const pages = $$('.page');
      pages.forEach(p => p.classList.remove('active'));
      if(hash.startsWith('#/checkout') || hash === '#/checkout'){
        $('#checkout').classList.add('active');
        window.scrollTo({top:0,behavior:'smooth'});
        generatePIX();
      } else if(hash.startsWith('#/success')){
        $('#success').classList.add('active');
        window.scrollTo({top:0,behavior:'smooth'});
      } else if(hash.startsWith('#/error')){
        $('#error').classList.add('active');
      } else {
        $('#home').classList.add('active');
      }
    }
    function navigate(h){
      if(h === '/') location.hash = '/';
      else location.hash = h;
    }

    // ===== UI helpers =====
    function scrollToGrid(){ document.querySelector('.grid').scrollIntoView({behavior:'smooth'}); }
    function flashCart(){
      const box = $('#cartBox');
      box.style.transform = 'translateY(-6px)';
      setTimeout(()=>box.style.transform='translateY(0)',200);
    }
    function clearCartAndReturn(){
      clearCart();
      navigate('#/');
      alert('Carrinho limpo. Obrigado pela compra (simula√ß√£o).');
    }
    function escapeHTML(s){ return (s+'').replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[c]); }

    // ===== Small UX: allow adding with keyboard Enter in search =====
    $('#searchInput').addEventListener('keydown', e => { if(e.key === 'Enter') renderProducts(); });

  </script>
</body>
</html>
